<div class="checkout-component" *ngIf="!!pageContent && !screenConfirm">
  <div (click)="cancel();" class="checkout-component-bg"></div>
  <div class="checkout-component-content">
    <svg (click)="cancel();" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"
         class="svg-inline--fa fa-times fa-w-10 fa-3x close-checkout">
      <path fill="currentColor"
            d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"
            class=""></path>
    </svg>

    <h3 class="checkout-title">{{pageContent.title}}</h3>
    <ul class="list-link">
      <li class="link-item">
        <span class="link-text">Thông tin giao hàng</span>
      </li>
      <!--      <li class="link-item">-->
      <!--        <img class="link-icon" [src]="pageContent.iconPayment">-->
      <!--        <span class="link-text">{{pageContent.payment}}</span>-->
      <!--      </li>-->
    </ul>
    <div class="forms-address popup-body">
      <div [ngClass]="{'required':field.showRequired}" *ngFor="let field of pageContent.links.address.fields"
           class="form-item">
        <label class="form-item-label">{{field.name}}</label>
        <input *ngIf="field.type!=='select'" class="form-item-input" [(ngModel)]="field.value"
               [placeholder]="field.placeholder">

        <select (change)="getDistrict(field.value)" *ngIf="field.type==='select' && field.id==='province'"
                class="form-item-input" [(ngModel)]="field.value">
          <option *ngFor="let option of province.provinces" [value]="option.ProvinceId">{{option.ProvinceName}}</option>
        </select>

        <select (change)="getWard(field.value)" *ngIf="field.type==='select' && field.id==='district'"
                class="form-item-input" [(ngModel)]="field.value">
          <option *ngFor="let option of province.districtsView"
                  [value]="option.DistrictId">{{option.DistrictName}}</option>
        </select>

        <select *ngIf="field.type==='select' && field.id==='ward'" class="form-item-input" [(ngModel)]="field.value">
          <option *ngFor="let option of province.wardsView" [value]="option.WardId">{{option.WardName}}</option>
        </select>
        <span class="required">Trường này là bắt buộc nhập</span>
      </div>
    </div>
    <ul class="list-link">
    </ul>
    <div class="order-summary-container">
      <div class="order-summary">
        <ng-container *ngIf="!!checkOutInfo && !!checkOutInfo.data">
          <div *ngFor="let item of checkOutInfo.data" class="summary-item">
            <div class="text"><span class="summary-text">{{item.name}}</span></div>
            <div class="value">{{item.value}}</div>
          </div>
        </ng-container>

      </div>
    </div>
    <p class="notify-freeship" *ngIf="!(images.length>3)">
      (*) Đơn hàng với 4 khung ảnh trở lên sẽ được freeship.
    </p>
    <div  class="bottom-button-container">
      <div [ngClass]="{'disable':images.length===0}" (click)="images.length>0?nextStep():null" class="bottom-button">
        {{images.length > 0 ? 'Tiếp tục' : 'Vui lòng chọn một ảnh trước'}}
      </div>
    </div>
  </div>
</div>


<div class="checkout-component" *ngIf="!!pageContent && screenConfirm">
  <div (click)="cancel();" class="checkout-component-bg"></div>
  <div class="checkout-component-content" *ngIf="!resultOrder">
    <svg (click)="cancel();" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"
         class="svg-inline--fa fa-times fa-w-10 fa-3x close-checkout">
      <path fill="currentColor"
            d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"
            class=""></path>
    </svg>
    <h3 class="checkout-title">
      <button (click)="screenConfirm=false;" class="back">
        <svg focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"
             class="svg-inline--fa fa-angle-left fa-w-6 fa-3x">
          <path fill="currentColor"
                d="M4.2 247.5L151 99.5c4.7-4.7 12.3-4.7 17 0l19.8 19.8c4.7 4.7 4.7 12.3 0 17L69.3 256l118.5 119.7c4.7 4.7 4.7 12.3 0 17L168 412.5c-4.7 4.7-12.3 4.7-17 0L4.2 264.5c-4.7-4.7-4.7-12.3 0-17z"
                class=""></path>
        </svg>
      </button>
      Xác nhận đơn hàng
    </h3>
    <ul class="list-link">
      <li class="link-item">
        <span class="link-text">Địa chỉ giao hàng</span>
      </li>
    </ul>
    <div class="forms-address popup-body">
      <ng-container *ngFor="let field of pageContent.links.address.fields">
        <div class="form-item" *ngIf="!!field.value">
          <label class="form-item-label">{{field.name}}</label>
          <p *ngIf="field.type!=='select'" style="margin: 0" class="form-item-input">{{field.value}}</p>

          <p style="margin: 0" (change)="getDistrict(field.value)"
             *ngIf="field.type==='select' && field.id==='province'"
             class="form-item-input">
            <ng-container *ngFor="let option of province.provinces">
              {{option.ProvinceId === field.value ? option.ProvinceName : ''}}
            </ng-container>
          </p>

          <p (change)="getWard(field.value)" *ngIf="field.type==='select' && field.id==='district'"
             class="form-item-input">
            <ng-container *ngFor="let option of province.districtsView">
              {{option.DistrictId === field.value ? option.DistrictName : ''}}
            </ng-container>
          </p>

          <p *ngIf="field.type==='select' && field.id==='ward'" class="form-item-input">
            <ng-container *ngFor="let option of province.wardsView">
              {{option.WardId === field.value ? option.WardName : ''}}
            </ng-container>
          </p>
        </div>
      </ng-container>

    </div>
    <ul class="list-link">
    </ul>
    <div class="order-summary-container">
      <div class="order-summary">
        <ng-container *ngIf="!!checkOutInfo && !!checkOutInfo.data">
          <div *ngFor="let item of checkOutInfo.data" class="summary-item">
            <div class="text"><span class="summary-text">{{item.name}}</span></div>
            <div class="value">{{item.value}}</div>
          </div>
        </ng-container>

      </div>
    </div>
    <p class="notify-freeship" *ngIf="!(images.length>3)">
      (*) Đơn hàng với 4 khung ảnh trở lên sẽ được freeship.
    </p>
    <div class="bottom-button-container">
      <div (click)="!processing?checkout():null;"
           class="bottom-button">{{processing ? 'Đang xử lý...' : pageContent.checkoutText}}</div>
    </div>
  </div>

  <div class="checkout-component-content" *ngIf="resultOrder">
    <svg focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
         class="result-img svg-inline--fa fa-check-circle fa-w-16 fa-5x">
      <g class="fa-group">
        <path fill="currentColor"
              d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm155.31 195.31l-184 184a16 16 0 0 1-22.62 0l-104-104a16 16 0 0 1 0-22.62l22.62-22.63a16 16 0 0 1 22.63 0L216 308.12l150.06-150.06a16 16 0 0 1 22.63 0l22.62 22.63a16 16 0 0 1 0 22.62z"
              class="fa-secondary"></path>
        <path fill="currentColor"
              d="M227.31 387.31a16 16 0 0 1-22.62 0l-104-104a16 16 0 0 1 0-22.62l22.62-22.63a16 16 0 0 1 22.63 0L216 308.12l150.06-150.06a16 16 0 0 1 22.63 0l22.62 22.63a16 16 0 0 1 0 22.62l-184 184z"
              class="fa-primary"></path>
      </g>
    </svg>
    <h3 class="result-title">Đặt hàng thành công</h3>
    <p class="result-des">Cảm ơn bạn đã đặt hàng, chúng tôi sẽ sớm liên hệ để xác nhận đơn hàng này.</p>
    <button (click)="goHome();" class="result-btn">Về trang chủ</button>
  </div>
</div>


<app-popup (acceptEvent)="applyAddress();"
           (cancelEvent)="addressPopupShow=false;" *ngIf="addressPopupShow"
           [title]="pageContent.addAddress"
           [acceptText]="pageContent.done">
  <div class="forms-address popup-body">
    <div *ngFor="let field of pageContent.links.address.fields" class="form-item">
      <label class="form-item-label">{{field.name}}</label>
      <input class="form-item-input" [(ngModel)]="field.value" [placeholder]="field.placeholder">
    </div>
  </div>
</app-popup>


<swal
  #okSwal
  title="Thông báo thành công"
  text="Đơn hàng của bạn đã được đặt thành công. Chúng tôi sẽ sớm liên hệ với bạn để xác nhận đơn hàng!!!"
  icon="success"
  [showCancelButton]="false"
  [focusCancel]="true">
</swal>
